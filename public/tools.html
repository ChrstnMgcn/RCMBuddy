<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tools - Excel Buddy</title> <!-- FIX: Changed title from MirraBuddy to Excel Buddy -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; @apply bg-gray-50 text-gray-800; }
        header { @apply bg-gradient-to-r from-blue-600 to-indigo-700 p-4 shadow-lg; }
        main { @apply flex-grow container mx-auto p-4 sm:p-6 lg:p-8; }
        .tool-card { @apply bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300; }
        .tool-card h2 { @apply text-xl font-semibold text-blue-700 mb-2; }
        .tool-card p { @apply text-gray-600 text-sm; }
        .tool-card a { @apply inline-block mt-4 text-blue-600 hover:text-blue-800 font-medium; }
        /* Style for development status */
        .development-tool {
            opacity: 0.7; /* Make it slightly faded */
            filter: grayscale(20%); /* Slight grayscale effect */
            position: relative;
            pointer-events: none; /* FIX: Disable clicks on the entire card */
        }
        .development-tool::after {
            content: "Coming Soon"; /* Or "Development" */
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #ffc107; /* Amber/Yellow */
            color: #333;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        .development-tool a {
             display: none; /* FIX: Hide the "Launch Tool" button */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <header class="bg-gradient-to-r from-blue-600 to-indigo-700 p-4 shadow-lg">
        <div class="container mx-auto flex flex-col sm:flex-row items-center justify-between">
            <h1 class="text-white text-3xl font-bold mb-2 sm:mb-0">Tools</h1>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="/dashboard.html" class="text-white hover:text-blue-200 transition duration-300">Dashboard</a></li>
                    <li><a href="/tools.html" class="text-white hover:text-blue-200 transition duration-300 active">Tools List</a></li>
                    <li><a href="#" id="profileLink" class="text-white hover:text-blue-200 transition duration-300">Profile</a></li>
                    <li><a href="#" id="logoutBtn" class="text-white hover:text-blue-200 transition duration-300 cursor-pointer">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

            <div class="tool-card">
                <h2>File Manager</h2>
                <p>Securely upload, list, download, and delete your company files.</p>
                <a href="/file-manager.html">Go to File Manager &rarr;</a>
            </div>

            <div class="tool-card">
                <h2>Data Cleaner</h2>
                <p>Client-side tool for basic Excel data cleaning (duplicates, trimming, case standardization).</p>
                <a href="/tools/data-cleaner.html">Go to Data Cleaner &rarr;</a>
            </div>

            <div class="tool-card">
                <h2>Excel Validate</h2>
                <p>Analyze Excel/CSV files for data quality issues using custom validation rules.</p>
                <a href="/tools/validation-engine.html">Go to Excel Validate &rarr;</a>
            </div>

            <div class="tool-card">
                <h2>Data Dictionary Builder</h2>
                <p>Create and manage custom data dictionaries to define validation rules for your columns.</p>
                <a href="/tools/data-dictionary-builder.html">Build Dictionary &rarr;</a>
            </div>

            <!-- Placeholder for future development tools -->
            <div class="tool-card development-tool"> <!-- FIX: Added development-tool class -->
                <h2>Report Automator</h2>
                <p>Automate the generation and distribution of your routine Excel reports with custom templates.</p>
                <span>Coming Soon!</span> <!-- Display Coming Soon text directly -->
            </div>
            <div class="tool-card development-tool"> <!-- FIX: Added development-tool class -->
                <h2>Merger & Splitter</h2>
                <p>Efficiently combine multiple Excel files or split large spreadsheets into manageable parts.</p>
                <span>Coming Soon!</span>
            </div>
               <div class="tool-card development-tool"> <!-- FIX: Added development-tool class -->
                <h2>Macro Recorder & Editor</h2>
                <p>Record your repetitive Excel actions and easily edit or share the generated VBA macros.</p>
                <span>Coming Soon!</span>
            </div>
               <div class="tool-card development-tool"> <!-- FIX: Added development-tool class -->
                <h2>Custom Formula Builder</h2>
                <p>Create, save, and manage your own complex Excel formulas for re-use and efficiency.</p>
                <span>Coming Soon!</span>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-4 mt-8">
        <div class="container mx-auto text-center text-sm">
            &copy; 2025 Excel Buddy. All rights reserved.
        </div>
    </footer>

    <script>
        // Authentication and Navigation setup (reused from dashboard/other protected pages)
        async function verifyToken() {
            const token = localStorage.getItem('jwtToken');
            if (!token) {
                window.location.href = '/'; // Redirect to login if no token
                return null;
            }
            try {
                const response = await fetch('/api/protected', {
                    method: 'GET',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                if (!response.ok) {
                    localStorage.removeItem('jwtToken');
                    window.location.href = '/';
                    return null;
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error verifying token:', error);
                localStorage.removeItem('jwtToken');
                window.location.href = '/';
                return null;
            }
        }

        function setupNavigation(userData) {
            const profileLink = document.getElementById('profileLink');
            if (profileLink && userData && userData.user) { // FIX: Check for nested 'user' object
                profileLink.textContent = `Hello, ${userData.user.username}`; // FIX: Access nested username
                // You might want a dedicated profile page, for now it's just a text change
                profileLink.href = '#';
            }
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    localStorage.removeItem('jwtToken');
                    window.location.href = '/'; // Redirect to login page
                });
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const userData = await verifyToken();
            if (userData) {
                setupNavigation(userData);
            }
        });
    </script>
</body>
</html>
